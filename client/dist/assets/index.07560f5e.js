import{r as m,u as N,a as T,j as d,b as t,c as D,L as y,R as w,B as W,S as q,d as v,e as K,f as J,g as Q,P as Y}from"./vendor.b0c800f6.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};Z();const x="LOGGED_IN",I="LOGGED_OUT",R="UPDATE_USERNAME",O="UPDATE_USER_ID",S="TOTAL_DATA",L="ADD_TOTAL_DATA",U="REMOVE_TOTAL_DATA",P="UPDATE_TOTAL_NAME",C="UPDATE_TOTAL_DESCRIPTION",k="TRIED_DATA",M="ADD_TRIED_DATA",G="REMOVE_TRIED_DATA",H="UPDATE_TRIED_NAME",j="UPDATE_TRIED_DESCRIPTION",V="WIPE_ALL_DATA",ee=e=>({type:S,payload:e}),te=e=>({type:L,payload:e}),ne=e=>({type:U,payload:e}),oe=(e,n)=>({type:P,id:e,payload:n}),ae=(e,n)=>({type:C,id:e,payload:n}),re=e=>({type:k,payload:e}),se=e=>({type:M,payload:e}),ie=e=>({type:G,payload:e}),ce=(e,n)=>({type:H,id:e,payload:n}),de=(e,n)=>({type:j,id:e,payload:n}),le=()=>({type:V});function $(){const[e,n]=m.exports.useState(""),[r,c]=m.exports.useState(""),o=N(a=>a.username),i=N(a=>a.user_id),l=N(a=>a.totalData),u=T(),f=async()=>{const a=await D.get(`http://localhost:3001/total/${i}`);l.length===0&&(u(ee(a.data)),u(le()))},p=async()=>{const a=await D.post("http://localhost:3001/total/add",{name:e,description:r,username:o,user_id:i});u(te(a.data)),n(""),c("")},h=async a=>{const g=await D.delete(`http://localhost:3001/total/remove/${a.idtotal}`);u(ne(parseInt(g.data.id)))},E=a=>{n(a.target.value)},_=a=>{c(a.target.value)},A=async a=>{let g=prompt("Enter new Restaurant Name");g===null?alert("No changes made"):(D.put(`http://localhost:3001/total/update/name/${a.idtotal}`,{newName:g}),u(oe(a.idtotal,g)))},b=a=>{let g=prompt("Enter new Description");g?(D.put(`http://localhost:3001/total/update/description/${a.idtotal}`,{newDesc:g}),u(ae(a.idtotal,g))):alert("No changes made")},s=a=>{h(a),D.post("http://localhost:3001/tried/add",{name:a.name,description:a.description,username:o}),console.log(a)};return m.exports.useEffect(()=>{f()},[i]),d("div",{children:[d("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:f,children:"GET"}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:p,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:e,onChange:E}),t("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:r,name:"totalDesc",onChange:_})]}),l.map((a,g)=>d("div",{className:"grid gap-x-10 justify-items-center grid-cols-3 mx-60  ",children:[d("div",{className:"px-6 my-2 ",children:[t("span",{className:"ml-6 mr-1",children:a.name}),t("button",{className:"opacity-20 hover:opacity-80",onClick:()=>A(a),children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),d("div",{className:"mx-6 my-2",children:[t("span",{className:"m-2 px-2",children:a.description}),t("button",{className:"opacity-20 hover:opacity-100 transition duration-150",onClick:()=>b(a),children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),d("div",{className:"px-6 my-2",children:[t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(a),children:"Remove"}),t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>s(a),children:"Move To Tried"})]})]},g))]})}function B(){const[e,n]=m.exports.useState(""),[r,c]=m.exports.useState(""),o=T(),i=N(s=>s.triedData),l=N(s=>s.username),u=N(s=>s.user_id),f=async()=>{if(u!==null){const s=await D.get(`http://localhost:3001/tried/${u}`);i.length===0&&o(re(s.data))}},p=async()=>{const s=await D.post("http://localhost:3001/tried/add",{name:e,description:r,username:l,user_id:u});o(se(s.data)),c(""),n("")},h=async s=>{const a=await D.delete(`http://localhost:3001/tried/remove/${s.idtried}`),g=parseInt(a.data.idtried);o(ie(g))},E=s=>{let a=prompt("Enter new Restaurant Name");a===null?alert("No changes made"):(D.put(`http://localhost:3001/tried/update/name/${s.idtried}`,{newName:a}),o(ce(s.idtried,a)))},_=s=>{let a=prompt("Enter new Description");a?(D.put(`http://localhost:3001/tried/update/description/${s.idtried}`,{newDesc:a}),o(de(s.idtried,a))):alert("No changes made")},A=s=>{n(s.target.value)},b=s=>{c(s.target.value)};return m.exports.useEffect(()=>{f()},[l]),d("div",{children:[d("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:f,children:"GET"}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:p,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",value:e,placeholder:"Restaurant Name",type:"text",onChange:A}),t("input",{className:" p-1 rounded",value:r,placeholder:"Restaurant Description",type:"text",onChange:b})]}),i&&i.map((s,a)=>d("div",{className:"grid grid-cols-3 justify-items-center mx-60",children:[d("div",{className:"px-6 my-2",children:[t("span",{className:"pl-11 m-2 ",children:s.name}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>E(s),children:"Edit Name"})]}),d("div",{className:"my-2",children:[t("span",{className:"px-2 m-2 ",children:s.description}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>_(s),children:"Edit Description"})]}),t("div",{className:"my-2",children:t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(s),children:"Remove"})})]},a))]})}function ue(){const[e,n]=m.exports.useState(!1),r=()=>{localStorage.getItem("token ")?n(!0):n(!1)};return m.exports.useEffect(()=>{r()},[]),t("div",{children:e?d("div",{children:[t($,{}),t(B,{})]}):t("div",{children:"Log in to see restaurants!"})})}const X=()=>({type:x}),pe=()=>({type:I});function me(){const e=T(),n=N(o=>o.auth),r=N(o=>o.username);return d("nav",{className:"flex justify-around bg-blue-400",children:[d("div",{className:"my-4",children:[t(y,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/home",children:"HOME"}),t(y,{className:" p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out ",to:"/total",children:"TOTAL"}),t(y,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/tried",children:"TRIED"})]}),n?d("div",{className:"m-2 inline-flex",children:[d("p",{className:"p-2",children:["welcome ",r]}),t("button",{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",onClick:()=>{localStorage.removeItem("token "),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),e(pe())},children:"LOGOUT"})]}):d("div",{className:"flex",children:[t(w,{to:"/login"}),t(y,{className:"p-2",to:"/signup",children:"SIGNUP"}),t(y,{className:"p-2",to:"/login",children:"LOGIN"})]})]})}function he(){const[e,n]=m.exports.useState(""),[r,c]=m.exports.useState("");return d("div",{children:[t("input",{type:"text",placeholder:"Enter Username",onChange:u=>{n(u.target.value)}}),t("input",{type:"text",placeholder:"Enter Password",onChange:u=>{c(u.target.value)}}),t("button",{onClick:()=>{D.post("http://localhost:3001/signup",{username:e,password:r}),window.location.reload()},children:"CREATE USER"})]})}const z=e=>({type:R,payload:e}),F=e=>({type:O,payload:e});function ge(){const[e,n]=m.exports.useState(""),[r,c]=m.exports.useState(""),o=T(),i=N(p=>p.auth);return t("div",{children:i?t(w,{to:"/total"}):d("div",{children:[t("input",{type:"text",placeholder:"Username",onChange:p=>{n(p.target.value)}}),t("input",{type:"text",placeholder:"Password",onChange:p=>{c(p.target.value)}}),t("button",{onClick:()=>{D.post("http://localhost:3001/login",{username:e,password:r}).then(p=>{if(p.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const h=p.data.user.ID;console.log(p),o(X()),o(z(e)),o(F(h)),localStorage.setItem("user_id",h),localStorage.setItem("username",e),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",p.data.token)}})},children:"LOGIN"})]})})}function De(){const e=T(),n=localStorage.getItem("username"),r=localStorage.getItem("user_id"),c=()=>{n&&r?(e(z(n)),e(X()),e(F(r))):console.log("NOTHING TO UPDATE")};return m.exports.useEffect(()=>{c()}),t(W,{children:d("div",{className:"bg-red-500 h-screen w-full",children:[t("div",{children:t(me,{})}),t("div",{className:"App",children:d(q,{children:[t(v,{exact:!0,path:"/",children:t(ue,{})}),t(v,{exact:!0,path:"/total",children:t($,{})}),t(v,{exact:!0,path:"/tried",children:t(B,{})}),t(v,{exact:!0,path:"/signup",children:t(he,{})}),t(v,{exact:!0,path:"/login",children:t(ge,{})})]})})]})})}const Ne=(e=!1,n)=>{switch(n.type){case x:return e=!0;case I:return e=!1;default:return e}},fe=(e=null,n)=>{switch(n.type){case O:return e=n.payload;default:return e}},Te=(e=[],n)=>{switch(n.type){case S:return e=[...e,...n.payload];case L:return e=[...e,n.payload];case U:return e=e.filter(o=>o.idtotal!==n.payload);case P:const r=e.find(o=>o.idtotal===n.id);if(r!==void 0){const o=e.indexOf(r),i=e.slice(0,o),l=e.slice(o+1,e.length);return e=[...i,{idtotal:r.idtotal,name:n.payload,description:r.description,user_id:r.user_id},...l]}case C:const c=e.find(o=>o.idtotal===n.id);if(c!==void 0){const o=e.indexOf(c),i=e.slice(0,o),l=e.slice(o+1,e.length);return e=[...i,{idtotal:c.idtotal,name:c.name,description:n.payload,user_id:c.user_id},...l]}default:return e}},ye=(e=[],n)=>{switch(n.type){case k:return e=[...e,...n.payload];case M:return e=[...e,n.payload];case G:return e=e.filter(h=>h.idtried!==n.payload);case H:const r=e.find(h=>h.idtried===n.id),c=e.indexOf(r),o=e.slice(0,c),i=e.slice(c+1,e.length);return e=[...o,{idtried:r.idtried,name:n.payload,description:r.description,user_id:r.user_id},...i];case j:const l=e.find(h=>h.idtried===n.id),u=e.indexOf(l),f=e.slice(0,u),p=e.slice(u+1,e.length);return e=[...f,{idtried:l.idtried,name:l.name,description:n.payload,user_id:l.user_id},...p];case V:return e=[];default:return e}},ve=(e="",n)=>{switch(n.type){case R:return e=n.payload;default:return e}},Ee=K({auth:Ne,username:ve,user_id:fe,totalData:Te,triedData:ye}),_e={},Ae=Ee,be=J(Ae,_e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Q.render(t(m.exports.StrictMode,{children:t(Y,{store:be,children:t(De,{})})}),document.getElementById("root"));
