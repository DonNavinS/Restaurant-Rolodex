import{a as J,j as c,b as t,r as p,u as y,c as T,L as x,R as b,B as Q,S as Y,d as w,e as Z,f as ee,g as te,P as ne}from"./vendor.9b51c18e.js";const ae=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}};ae();const oe="https://restaurant-rolodex.herokuapp.com",N=J.create({baseURL:`${oe}/api`}),O="LOGGED_IN",L="LOGGED_OUT",P="UPDATE_USERNAME",C="UPDATE_USER_ID",U="TOTAL_DATA",k="ADD_TOTAL_DATA",M="REMOVE_TOTAL_DATA",j="UPDATE_TOTAL_NAME",G="UPDATE_TOTAL_DESCRIPTION",H="TRIED_DATA",$="ADD_TRIED_DATA",V="REMOVE_TRIED_DATA",B="UPDATE_TRIED_NAME",X="UPDATE_TRIED_DESCRIPTION",z="WIPE_ALL_DATA",se=e=>({type:U,payload:e}),re=e=>({type:k,payload:e}),ie=e=>({type:M,payload:e}),de=(e,n)=>({type:j,id:e,payload:n}),ce=(e,n)=>({type:G,id:e,payload:n}),le=e=>({type:H,payload:e}),ue=e=>({type:$,payload:e}),pe=e=>({type:V,payload:e}),me=(e,n)=>({type:B,id:e,payload:n}),he=(e,n)=>({type:X,id:e,payload:n}),ge=()=>({type:z}),F=c("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),W=t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),_=t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})});function q(){const[e,n]=p.exports.useState(""),[s,d]=p.exports.useState(""),a=y(o=>o.username),r=y(o=>o.user_id),l=y(o=>o.totalData),m=T(),D=async()=>{const o=await N.get(`/total/${r}`);l.length===0&&(m(se(o.data)),m(ge()))},u=async()=>{const o=await N.post("/total/add",{name:e,description:s,username:a,user_id:r});m(re(o.data)),n(""),d("")},h=async o=>{const f=await N.delete(`/total/remove/${o.idtotal}`);m(ie(parseInt(f.data.id)))},v=o=>{n(o.target.value)},A=o=>{d(o.target.value)},g=async o=>{let f=prompt("Enter new Restaurant Name");f===null?alert("No changes made"):(N.put(`/total/update/name/${o.idtotal}`,{newName:f}),m(de(o.idtotal,f)))},E=o=>{let f=prompt("Enter new Description");f?(N.put(`/total/update/description/${o.idtotal}`,{newDesc:f}),m(ce(o.idtotal,f))):alert("No changes made")},i=o=>{h(o),N.post("/tried/add",{name:o.name,description:o.description,username:a}),console.log(o)};return p.exports.useEffect(()=>{D()},[r]),c("div",{children:[c("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:u,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:e,onChange:v}),t("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:s,name:"totalDesc",onChange:A})]}),l.map((o,f)=>c("div",{className:"grid gap-x-10 justify-items-center grid-cols-3 mx-60  ",children:[c("div",{className:"px-6 my-2 flex",children:[t("span",{className:"ml-6 mr-1",children:o.name}),t("button",{className:"opacity-20 hover:opacity-80",onClick:()=>g(o),children:t("span",{children:_})})]}),c("div",{className:"mx-6 my-2 flex",children:[t("span",{className:"m-2 px-2",children:o.description}),t("button",{className:"opacity-20 hover:opacity-100 transition duration-150",onClick:()=>E(o),children:t("span",{children:_})})]}),c("div",{className:"px-6 my-2",children:[t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(o),children:"Remove"}),t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>i(o),children:"Move To Tried"})]})]},f))]})}function K(){const[e,n]=p.exports.useState(""),[s,d]=p.exports.useState(""),a=T(),r=y(i=>i.triedData),l=y(i=>i.username),m=y(i=>i.user_id),D=async()=>{if(m!==null){const i=await N.get(`/tried/${m}`);r.length===0&&a(le(i.data))}},u=async()=>{const i=await N.post("/tried/add",{name:e,description:s,username:l,user_id:m});a(ue(i.data)),d(""),n("")},h=async i=>{const o=await N.delete(`/tried/remove/${i.idtried}`),f=parseInt(o.data.idtried);a(pe(f))},v=i=>{let o=prompt("Enter new Restaurant Name");o===null?alert("No changes made"):(N.put(`/tried/update/name/${i.idtried}`,{newName:o}),a(me(i.idtried,o)))},A=i=>{let o=prompt("Enter new Description");o?(N.put(`/tried/update/description/${i.idtried}`,{newDesc:o}),a(he(i.idtried,o))):alert("No changes made")},g=i=>{n(i.target.value)},E=i=>{d(i.target.value)};return p.exports.useEffect(()=>{D()},[l]),c("div",{children:[c("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:u,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",value:e,placeholder:"Restaurant Name",type:"text",onChange:g}),t("input",{className:" p-1 rounded",value:s,placeholder:"Restaurant Description",type:"text",onChange:E})]}),r&&r.map((i,o)=>c("div",{className:"grid grid-cols-3 justify-items-center mx-60",children:[c("div",{className:"px-6 my-2 flex",children:[t("span",{className:"pl-11 m-2 ",children:i.name}),t("button",{className:"opacity-20 hover:opacity-80 transition duration-500 ease-in-out",onClick:()=>v(i),children:t("span",{children:_})})]}),c("div",{className:"my-2 flex",children:[t("span",{className:"px-2 m-2 ",children:i.description}),t("button",{className:"opacity-20 hover:opacity-80 transition duration-500 ease-in-out",onClick:()=>A(i),children:t("span",{children:_})})]}),t("div",{className:"my-2",children:t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(i),children:"Remove"})})]},o))]})}function fe(){const[e,n]=p.exports.useState(!1),s=()=>{localStorage.getItem("token ")?n(!0):n(!1)};return p.exports.useEffect(()=>{s()},[]),t("div",{children:e?c("div",{children:[t(q,{}),t(K,{})]}):t("div",{children:"Log in to see restaurants!"})})}const I=()=>({type:O}),Ne=()=>({type:L});function De(){const e=T(),n=y(a=>a.auth),s=y(a=>a.username);return c("nav",{className:"flex justify-around bg-blue-400 pb-6 text-xl w-full",children:[c("div",{className:"mt-6 my-auto inline-flex",children:[t(x,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/home",children:"HOME"}),t(x,{className:" p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out ",to:"/total",children:"TOTAL"}),t(x,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/tried",children:"TRIED"})]}),n?c("div",{className:"m-2 inline-flex",children:[c("p",{className:"p-2",children:["welcome ",s]}),t("button",{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",onClick:()=>{localStorage.removeItem("token "),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),e(Ne())},children:"LOGOUT"})]}):c("div",{className:"mt-6 inline-flex",children:[t(b,{to:"/login"}),t(x,{to:"/signup",className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",children:"SIGNUP"}),t(x,{to:"/login",className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",children:"LOGIN"})]})]})}const R=e=>({type:C,payload:e}),S=e=>({type:P,payload:e});function ye(){const[e,n]=p.exports.useState(""),[s,d]=p.exports.useState(""),[a,r]=p.exports.useState(""),[l,m]=p.exports.useState(!1),[D,u]=p.exports.useState(!1),h=y(g=>g.auth),v=T();return t("div",{children:h?t(b,{to:"/total"}):c("div",{className:"flex-col text-center mt-4 ",children:[t("input",{className:"m-2 rounded p-2 mr-9",type:"text",placeholder:"Enter Username",onChange:g=>{n(g.target.value)}}),c("div",{className:"flex justify-center",children:[t("input",{className:"m-2 rounded p-2",type:l?"text":"password",placeholder:"Enter Password",onChange:g=>{d(g.target.value)}}),t("button",{onClick:()=>m(!l),children:l?F:W})]}),c("div",{className:"flex justify-center",children:[t("input",{className:"m-2 rounded p-2",type:D?"text":"password",placeholder:"Confirm Password",onChange:g=>{r(g.target.value)}}),t("button",{onClick:()=>u(!D),children:D?F:W})]}),t("div",{children:t("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{s!==a?alert("Passwords do not match!"):N.post("/signup",{username:e,password:s}).then(g=>{console.log(g.data.insertId),v(I()),v(S(e)),v(R(g.data.insertId))})},children:"CREATE USER"})})]})})}function ve(){const[e,n]=p.exports.useState(""),[s,d]=p.exports.useState(""),a=T(),r=y(u=>u.auth);return t("div",{children:r?t(b,{to:"/total"}):c("div",{className:"flex justify-center mt-4",children:[t("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Username",onChange:u=>{n(u.target.value)}}),t("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Password",onChange:u=>{d(u.target.value)}}),t("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{N.post("/login",{username:e,password:s}).then(u=>{if(u.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const h=u.data.user.ID;console.log(u),a(I()),a(S(e)),a(R(h)),localStorage.setItem("user_id",h),localStorage.setItem("username",e),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",u.data.token)}})},children:"LOGIN"})]})})}function Te(){const e=T(),n=localStorage.getItem("username"),s=localStorage.getItem("user_id"),d=()=>{n&&s?(e(S(n)),e(I()),e(R(s))):console.log("NOTHING TO UPDATE")};return p.exports.useEffect(()=>{d()}),t(Q,{children:c("div",{className:"bg-red-500 h-screen w-full",children:[t("div",{children:t(De,{})}),t("div",{className:"App",children:c(Y,{children:[t(w,{exact:!0,path:"/",children:t(fe,{})}),t(w,{exact:!0,path:"/total",children:t(q,{})}),t(w,{exact:!0,path:"/tried",children:t(K,{})}),t(w,{exact:!0,path:"/signup",children:t(ye,{})}),t(w,{exact:!0,path:"/login",children:t(ve,{})})]})})]})})}const xe=(e=!1,n)=>{switch(n.type){case O:return e=!0;case L:return e=!1;default:return e}},we=(e=null,n)=>{switch(n.type){case C:return e=n.payload;default:return e}},Ae=(e=[],n)=>{switch(n.type){case U:return e=[...e,...n.payload];case k:return e=[...e,n.payload];case M:return e=e.filter(a=>a.idtotal!==n.payload);case j:const s=e.find(a=>a.idtotal===n.id);if(s!==void 0){const a=e.indexOf(s),r=e.slice(0,a),l=e.slice(a+1,e.length);return e=[...r,{idtotal:s.idtotal,name:n.payload,description:s.description,user_id:s.user_id},...l]}case G:const d=e.find(a=>a.idtotal===n.id);if(d!==void 0){const a=e.indexOf(d),r=e.slice(0,a),l=e.slice(a+1,e.length);return e=[...r,{idtotal:d.idtotal,name:d.name,description:n.payload,user_id:d.user_id},...l]}default:return e}},_e=(e=[],n)=>{switch(n.type){case H:return e=[...e,...n.payload];case $:return e=[...e,n.payload];case V:return e=e.filter(h=>h.idtried!==n.payload);case B:const s=e.find(h=>h.idtried===n.id),d=e.indexOf(s),a=e.slice(0,d),r=e.slice(d+1,e.length);return e=[...a,{idtried:s.idtried,name:n.payload,description:s.description,user_id:s.user_id},...r];case X:const l=e.find(h=>h.idtried===n.id),m=e.indexOf(l),D=e.slice(0,m),u=e.slice(m+1,e.length);return e=[...D,{idtried:l.idtried,name:l.name,description:n.payload,user_id:l.user_id},...u];case z:return e=[];default:return e}},Ee=(e="",n)=>{switch(n.type){case P:return e=n.payload;default:return e}},be=Z({auth:xe,username:Ee,user_id:we,totalData:Ae,triedData:_e}),Ie={},Re=be,Se=ee(Re,Ie,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());te.render(t(p.exports.StrictMode,{children:t(ne,{store:Se,children:t(Te,{})})}),document.getElementById("root"));
