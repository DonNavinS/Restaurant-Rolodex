import{a as T,r as m,u as D,b as y,j as c,c as t,L as v,R as x,B as q,S as K,d as E,e as J,f as Q,g as Y,P as Z}from"./vendor.44b559f4.js";const ee=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}};ee();const te="https://restaurant-rolodex.herokuapp.com",f=T.create({baseURL:te}),I="LOGGED_IN",R="LOGGED_OUT",O="UPDATE_USERNAME",S="UPDATE_USER_ID",L="TOTAL_DATA",U="ADD_TOTAL_DATA",P="REMOVE_TOTAL_DATA",C="UPDATE_TOTAL_NAME",k="UPDATE_TOTAL_DESCRIPTION",M="TRIED_DATA",G="ADD_TRIED_DATA",H="REMOVE_TRIED_DATA",j="UPDATE_TRIED_NAME",V="UPDATE_TRIED_DESCRIPTION",$="WIPE_ALL_DATA",ne=e=>({type:L,payload:e}),ae=e=>({type:U,payload:e}),oe=e=>({type:P,payload:e}),re=(e,n)=>({type:C,id:e,payload:n}),se=(e,n)=>({type:k,id:e,payload:n}),ie=e=>({type:M,payload:e}),de=e=>({type:G,payload:e}),ce=e=>({type:H,payload:e}),le=(e,n)=>({type:j,id:e,payload:n}),ue=(e,n)=>({type:V,id:e,payload:n}),pe=()=>({type:$});function B(){const[e,n]=m.exports.useState(""),[r,d]=m.exports.useState(""),a=D(o=>o.username),i=D(o=>o.user_id),l=D(o=>o.totalData),u=y(),N=async()=>{const o=await f.get(`/total/${i}`);l.length===0&&(u(ne(o.data)),u(pe()))},p=async()=>{const o=await f.post("/total/add",{name:e,description:r,username:a,user_id:i});u(ae(o.data)),n(""),d("")},h=async o=>{const g=await f.delete(`/total/remove/${o.idtotal}`);u(oe(parseInt(g.data.id)))},_=o=>{n(o.target.value)},A=o=>{d(o.target.value)},b=async o=>{let g=prompt("Enter new Restaurant Name");g===null?alert("No changes made"):(f.put(`/total/update/name/${o.idtotal}`,{newName:g}),u(re(o.idtotal,g)))},w=o=>{let g=prompt("Enter new Description");g?(f.put(`/total/update/description/${o.idtotal}`,{newDesc:g}),u(se(o.idtotal,g))):alert("No changes made")},s=o=>{h(o),f.post("/tried/add",{name:o.name,description:o.description,username:a}),console.log(o)};return m.exports.useEffect(()=>{N()},[i]),c("div",{children:[c("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:N,children:"GET"}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:p,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:e,onChange:_}),t("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:r,name:"totalDesc",onChange:A})]}),l.map((o,g)=>c("div",{className:"grid gap-x-10 justify-items-center grid-cols-3 mx-60  ",children:[c("div",{className:"px-6 my-2 ",children:[t("span",{className:"ml-6 mr-1",children:o.name}),t("button",{className:"opacity-20 hover:opacity-80",onClick:()=>b(o),children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),c("div",{className:"mx-6 my-2",children:[t("span",{className:"m-2 px-2",children:o.description}),t("button",{className:"opacity-20 hover:opacity-100 transition duration-150",onClick:()=>w(o),children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),c("div",{className:"px-6 my-2",children:[t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(o),children:"Remove"}),t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>s(o),children:"Move To Tried"})]})]},g))]})}function X(){const[e,n]=m.exports.useState(""),[r,d]=m.exports.useState(""),a=y(),i=D(s=>s.triedData),l=D(s=>s.username),u=D(s=>s.user_id),N=async()=>{if(u!==null){const s=await T.get(`/tried/${u}`);i.length===0&&a(ie(s.data))}},p=async()=>{const s=await T.post("/tried/add",{name:e,description:r,username:l,user_id:u});a(de(s.data)),d(""),n("")},h=async s=>{const o=await T.delete(`/tried/remove/${s.idtried}`),g=parseInt(o.data.idtried);a(ce(g))},_=s=>{let o=prompt("Enter new Restaurant Name");o===null?alert("No changes made"):(T.put(`/tried/update/name/${s.idtried}`,{newName:o}),a(le(s.idtried,o)))},A=s=>{let o=prompt("Enter new Description");o?(T.put(`/tried/update/description/${s.idtried}`,{newDesc:o}),a(ue(s.idtried,o))):alert("No changes made")},b=s=>{n(s.target.value)},w=s=>{d(s.target.value)};return m.exports.useEffect(()=>{N()},[l]),c("div",{children:[c("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:N,children:"GET"}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:p,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",value:e,placeholder:"Restaurant Name",type:"text",onChange:b}),t("input",{className:" p-1 rounded",value:r,placeholder:"Restaurant Description",type:"text",onChange:w})]}),i&&i.map((s,o)=>c("div",{className:"grid grid-cols-3 justify-items-center mx-60",children:[c("div",{className:"px-6 my-2",children:[t("span",{className:"pl-11 m-2 ",children:s.name}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>_(s),children:"Edit Name"})]}),c("div",{className:"my-2",children:[t("span",{className:"px-2 m-2 ",children:s.description}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>A(s),children:"Edit Description"})]}),t("div",{className:"my-2",children:t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(s),children:"Remove"})})]},o))]})}function me(){const[e,n]=m.exports.useState(!1),r=()=>{localStorage.getItem("token ")?n(!0):n(!1)};return m.exports.useEffect(()=>{r()},[]),t("div",{children:e?c("div",{children:[t(B,{}),t(X,{})]}):t("div",{children:"Log in to see restaurants!"})})}const z=()=>({type:I}),he=()=>({type:R});function ge(){const e=y(),n=D(a=>a.auth),r=D(a=>a.username);return c("nav",{className:"flex justify-around bg-blue-400",children:[c("div",{className:"my-4",children:[t(v,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/home",children:"HOME"}),t(v,{className:" p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out ",to:"/total",children:"TOTAL"}),t(v,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/tried",children:"TRIED"})]}),n?c("div",{className:"m-2 inline-flex",children:[c("p",{className:"p-2",children:["welcome ",r]}),t("button",{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",onClick:()=>{localStorage.removeItem("token "),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),e(he())},children:"LOGOUT"})]}):c("div",{className:"flex",children:[t(x,{to:"/login"}),t(v,{className:"p-2",to:"/signup",children:"SIGNUP"}),t(v,{className:"p-2",to:"/login",children:"LOGIN"})]})]})}function De(){const[e,n]=m.exports.useState(""),[r,d]=m.exports.useState("");return c("div",{children:[t("input",{type:"text",placeholder:"Enter Username",onChange:u=>{n(u.target.value)}}),t("input",{type:"text",placeholder:"Enter Password",onChange:u=>{d(u.target.value)}}),t("button",{onClick:()=>{f.post("/signup",{username:e,password:r}),window.location.reload()},children:"CREATE USER"})]})}const F=e=>({type:O,payload:e}),W=e=>({type:S,payload:e});function Ne(){const[e,n]=m.exports.useState(""),[r,d]=m.exports.useState(""),a=y(),i=D(p=>p.auth);return t("div",{children:i?t(x,{to:"/total"}):c("div",{children:[t("input",{type:"text",placeholder:"Username",onChange:p=>{n(p.target.value)}}),t("input",{type:"text",placeholder:"Password",onChange:p=>{d(p.target.value)}}),t("button",{onClick:()=>{f.post("/login",{username:e,password:r}).then(p=>{if(p.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const h=p.data.user.ID;console.log(p),a(z()),a(F(e)),a(W(h)),localStorage.setItem("user_id",h),localStorage.setItem("username",e),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",p.data.token)}})},children:"LOGIN"})]})})}function fe(){const e=y(),n=localStorage.getItem("username"),r=localStorage.getItem("user_id"),d=()=>{n&&r?(e(F(n)),e(z()),e(W(r))):console.log("NOTHING TO UPDATE")};return m.exports.useEffect(()=>{d()}),t(q,{children:c("div",{className:"bg-red-500 h-screen w-full",children:[t("div",{children:t(ge,{})}),t("div",{className:"App",children:c(K,{children:[t(E,{exact:!0,path:"/",children:t(me,{})}),t(E,{exact:!0,path:"/total",children:t(B,{})}),t(E,{exact:!0,path:"/tried",children:t(X,{})}),t(E,{exact:!0,path:"/signup",children:t(De,{})}),t(E,{exact:!0,path:"/login",children:t(Ne,{})})]})})]})})}const Te=(e=!1,n)=>{switch(n.type){case I:return e=!0;case R:return e=!1;default:return e}},ye=(e=null,n)=>{switch(n.type){case S:return e=n.payload;default:return e}},ve=(e=[],n)=>{switch(n.type){case L:return e=[...e,...n.payload];case U:return e=[...e,n.payload];case P:return e=e.filter(a=>a.idtotal!==n.payload);case C:const r=e.find(a=>a.idtotal===n.id);if(r!==void 0){const a=e.indexOf(r),i=e.slice(0,a),l=e.slice(a+1,e.length);return e=[...i,{idtotal:r.idtotal,name:n.payload,description:r.description,user_id:r.user_id},...l]}case k:const d=e.find(a=>a.idtotal===n.id);if(d!==void 0){const a=e.indexOf(d),i=e.slice(0,a),l=e.slice(a+1,e.length);return e=[...i,{idtotal:d.idtotal,name:d.name,description:n.payload,user_id:d.user_id},...l]}default:return e}},Ee=(e=[],n)=>{switch(n.type){case M:return e=[...e,...n.payload];case G:return e=[...e,n.payload];case H:return e=e.filter(h=>h.idtried!==n.payload);case j:const r=e.find(h=>h.idtried===n.id),d=e.indexOf(r),a=e.slice(0,d),i=e.slice(d+1,e.length);return e=[...a,{idtried:r.idtried,name:n.payload,description:r.description,user_id:r.user_id},...i];case V:const l=e.find(h=>h.idtried===n.id),u=e.indexOf(l),N=e.slice(0,u),p=e.slice(u+1,e.length);return e=[...N,{idtried:l.idtried,name:l.name,description:n.payload,user_id:l.user_id},...p];case $:return e=[];default:return e}},_e=(e="",n)=>{switch(n.type){case O:return e=n.payload;default:return e}},Ae=J({auth:Te,username:_e,user_id:ye,totalData:ve,triedData:Ee}),be={},we=Ae,xe=Q(we,be,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Y.render(t(m.exports.StrictMode,{children:t(Z,{store:xe,children:t(fe,{})})}),document.getElementById("root"));
