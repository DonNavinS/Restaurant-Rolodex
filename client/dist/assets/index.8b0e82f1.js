import{a as J,j as l,b as t,r as h,u as g,c as x,L as T,R as _,B as Q,S as Y,d as E,e as Z,f as ee,g as te,P as ne}from"./vendor.9b51c18e.js";const ae=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};ae();const oe="https://restaurant-rolodex.herokuapp.com",f=J.create({baseURL:`${oe}/api`}),O="LOGGED_IN",L="LOGGED_OUT",U="UPDATE_USERNAME",P="UPDATE_USER_ID",C="TOTAL_DATA",k="ADD_TOTAL_DATA",M="REMOVE_TOTAL_DATA",j="UPDATE_TOTAL_NAME",G="UPDATE_TOTAL_DESCRIPTION",H="TRIED_DATA",se="ADD_TRIED_DATA",$="REMOVE_TRIED_DATA",V="UPDATE_TRIED_NAME",B="UPDATE_TRIED_DESCRIPTION",re="WIPE_ALL_DATA",W="REMOVE_USERNAME",w=e=>({type:C,payload:e}),ie=e=>({type:k,payload:e}),ce=e=>({type:M,payload:e}),de=(e,a)=>({type:j,id:e,payload:a}),le=(e,a)=>({type:G,id:e,payload:a}),X=l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),z=t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),A=t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})});function ue(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),n=g(o=>o.username),s=g(o=>o.user_id),u=g(o=>o.totalData),y=g(o=>o.auth),c=x(),d=async()=>{const o=await f.get(`/total/${s}`);u.length===0&&c(w(o.data))},m=async()=>{const o=await f.post("/total/add",{name:e,description:r,username:n,user_id:s});c(ie(o.data)),a(""),i("")},p=async o=>{const v=await f.delete(`/total/remove/${o.idtotal}`);c(ce(parseInt(v.data.id)))},D=o=>{a(o.target.value)},N=o=>{i(o.target.value)},q=async o=>{let v=prompt("Enter new Restaurant Name");v===null?alert("No changes made"):(f.put(`/total/update/name/${o.idtotal}`,{newName:v}),c(de(o.idtotal,v)))},F=o=>{let v=prompt("Enter new Description");v?(f.put(`/total/update/description/${o.idtotal}`,{newDesc:v}),c(le(o.idtotal,v))):alert("No changes made")},K=o=>{p(o),f.post("/tried/add",{name:o.name,description:o.description,username:n}),console.log(o)};return h.exports.useEffect(()=>{d()},[s]),l("div",{children:[l("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:m,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:e,onChange:D}),t("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:r,name:"totalDesc",onChange:N})]}),y&&u?u.map((o,v)=>l("div",{className:"grid gap-x-10 justify-items-center grid-cols-3 mx-60  ",children:[l("div",{className:"px-6 my-2 flex",children:[t("span",{className:"ml-6 mr-1",children:o.name}),t("button",{className:"opacity-20 hover:opacity-80",onClick:()=>q(o),children:t("span",{children:A})})]}),l("div",{className:"mx-6 my-2 flex",children:[t("span",{className:"m-2 px-2",children:o.description}),t("button",{className:"opacity-20 hover:opacity-100 transition duration-150",onClick:()=>F(o),children:t("span",{children:A})})]}),l("div",{className:"px-6 my-2",children:[t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>p(o),children:"Remove"}),t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>K(o),children:"Move To Tried"})]})]},v)):t("div",{children:"Log in to see your restaurants!"})]})}const I=e=>({type:H,payload:e}),pe=e=>({type:$,payload:e}),me=(e,a)=>({type:V,id:e,payload:a}),he=(e,a)=>({type:B,id:e,payload:a});function ge(){h.exports.useState(""),h.exports.useState("");const e=x(),a=g(d=>d.triedData),r=g(d=>d.username),i=g(d=>d.user_id),n=g(d=>d.auth),s=async()=>{if(i!==null){const d=await f.get(`/tried/${i}`);a.length===0&&e(I(d.data))}},u=async d=>{const m=await f.delete(`/tried/remove/${d.idtried}`),p=parseInt(m.data.idtried);e(pe(p))},y=d=>{let m=prompt("Enter new Restaurant Name");m===null?alert("No changes made"):(f.put(`/tried/update/name/${d.idtried}`,{newName:m}),e(me(d.idtried,m)))},c=d=>{let m=prompt("Enter new Description");m?(f.put(`/tried/update/description/${d.idtried}`,{newDesc:m}),e(he(d.idtried,m))):alert("No changes made")};return h.exports.useEffect(()=>{s()},[r]),t("div",{children:n&&a?a.map((d,m)=>l("div",{className:"grid grid-cols-3 justify-items-center mx-60",children:[l("div",{className:"px-6 my-2 flex",children:[t("span",{className:"pl-11 m-2 ",children:d.name}),t("button",{className:"opacity-20 hover:opacity-80 transition duration-500 ease-in-out",onClick:()=>y(d),children:t("span",{children:A})})]}),l("div",{className:"my-2 flex",children:[t("span",{className:"px-2 m-2 ",children:d.description}),t("button",{className:"opacity-20 hover:opacity-80 transition duration-500 ease-in-out",onClick:()=>c(d),children:t("span",{children:A})})]}),t("div",{className:"my-2",children:t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>u(d),children:"Remove"})})]},m)):t("div",{children:"Log in to see your restaurants!"})})}function fe(){const e=x(),a=g(c=>c.auth),r=g(c=>c.user_id),i=g(c=>c.totalData),n=g(c=>c.triedData),s=n.slice(-5).reverse(),u=i.slice(-5).reverse(),y=()=>{a&&i.length===0&&n.length===0&&(f.get(`/total/${r}`).then(c=>{e(w(c.data))}),f.get(`/tried/${r}`).then(c=>{e(I(c.data))}))};return h.exports.useEffect(()=>y(),[]),t("div",{children:a?l("div",{children:[t("div",{className:"flex justify-center text-5xl",children:"Recently Updated Restaurants"}),t("div",{className:"flex justify-center text-xl mt-6",children:"To view the complete lists of your total and tried restaurants, and to add, update, or delete restaurants, click the links at the top of the page!"}),l("div",{className:"flex justify-center items-center my-8 gap-x-20 text-2xl",children:[l("div",{className:"flex flex-col justify-center items-center",children:[t("div",{children:"TOTAL"}),u.map(c=>l("div",{children:["name: ",c.name]}))]}),l("div",{className:"flex flex-col justify-center items-center",children:[t("div",{children:"TRIED"}),s.map(c=>t("div",{children:c.name}))]})]})]}):t("div",{children:"Log in to see restaurants!"})})}const b=()=>({type:O}),De=()=>({type:L}),R=e=>({type:U,payload:e}),Ne=()=>({type:W});function ve(){const e=x(),a=g(n=>n.auth),r=g(n=>n.username);return l("nav",{className:"flex justify-around items-center bg-blue-400 pb-6 w-full py-4 text-2xl",children:[l("div",{className:"inline-flex items-center",children:[t(T,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/home",children:"HOME"}),t(T,{className:" p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out ",to:"/total",children:"TOTAL"}),t(T,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/tried",children:"TRIED"})]}),a?l("div",{className:"m-2 inline-flex items-center",children:[l("p",{className:"p-2",children:["Welcome ",r,"!"]}),t("button",{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),localStorage.removeItem("user_id"),e(De()),e(Ne())},children:"LOGOUT"})]}):l("div",{className:"inline-flex",children:[t(_,{to:"/login"}),t(T,{to:"/signup",className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",children:"SIGNUP"}),t(T,{to:"/login",className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",children:"LOGIN"})]})]})}const S=e=>({type:P,payload:e});function ye(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),[n,s]=h.exports.useState(""),[u,y]=h.exports.useState(!1),[c,d]=h.exports.useState(!1),m=g(N=>N.auth),p=x();return t("div",{children:m?t(_,{to:"/total"}):l("div",{className:"flex-col text-center mt-4 ",children:[t("input",{className:"m-2 rounded p-2 mr-9",type:"text",placeholder:"Enter Username",onChange:N=>{a(N.target.value)}}),l("div",{className:"flex justify-center",children:[t("input",{className:"m-2 rounded p-2",type:u?"text":"password",placeholder:"Enter Password",onChange:N=>{i(N.target.value)}}),t("button",{onClick:()=>y(!u),children:u?X:z})]}),l("div",{className:"flex justify-center",children:[t("input",{className:"m-2 rounded p-2",type:c?"text":"password",placeholder:"Confirm Password",onChange:N=>{s(N.target.value)}}),t("button",{onClick:()=>d(!c),children:c?X:z})]}),t("div",{children:t("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{r!==n?alert("Passwords do not match!"):f.post("/signup",{username:e,password:r}).then(N=>{console.log(N.data.insertId),p(b()),p(R(e)),p(S(N.data.insertId))})},children:"CREATE USER"})})]})})}function xe(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),n=x(),s=g(p=>p.auth),u=async p=>{const D=await f.get(`/total/${p}`);n(w(D.data)),console.log(D)},y=async p=>{const D=await f.get(`tried/${p}`);n(I(D.data))};return t("div",{children:s?t(_,{to:"/home"}):l("div",{className:"flex justify-center mt-4",children:[t("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Username",onChange:p=>{a(p.target.value)}}),t("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Password",onChange:p=>{i(p.target.value)}}),t("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{f.post("/login",{username:e,password:r}).then(p=>{if(p.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const D=p.data.user.ID;n(b()),n(R(e)),n(S(D)),localStorage.setItem("user_id",D),localStorage.setItem("username",e),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",p.data.token),u(D),y(D)}})},children:"LOGIN"})]})})}function Te(){const e=x(),a=localStorage.getItem("username"),r=localStorage.getItem("user_id"),i=()=>{a?(e(R(a)),e(S(r)),e(b())):console.log("NOTHING TO UPDATE")};return h.exports.useEffect(()=>{i()}),t(Q,{children:l("div",{className:"bg-rose-500 h-screen w-full",children:[t("div",{children:t(ve,{})}),t("div",{className:"App",children:l(Y,{children:[t(E,{exact:!0,path:"/home",component:fe}),t(E,{exact:!0,path:"/total",component:ue}),t(E,{exact:!0,path:"/tried",component:ge}),t(E,{exact:!0,path:"/signup",component:ye}),t(E,{exact:!0,path:"/login",component:xe})]})})]})})}const Ee=(e=!1,a)=>{switch(a.type){case O:return e=!0;case L:return e=!1;default:return e}},Ae=(e=null,a)=>{switch(a.type){case P:return e=a.payload;default:return e}},_e=(e=[],a)=>{switch(a.type){case C:return e=[...e,...a.payload];case k:return e=[...e,a.payload];case M:return e=e.filter(n=>n.idtotal!==a.payload);case j:const r=e.find(n=>n.idtotal===a.id);if(r!==void 0){const n=e.indexOf(r),s=e.slice(0,n),u=e.slice(n+1,e.length);return e=[...s,{idtotal:r.idtotal,name:a.payload,description:r.description,user_id:r.user_id},...u]}case G:const i=e.find(n=>n.idtotal===a.id);if(i!==void 0){const n=e.indexOf(i),s=e.slice(0,n),u=e.slice(n+1,e.length);return e=[...s,{idtotal:i.idtotal,name:i.name,description:a.payload,user_id:i.user_id},...u]}default:return e}},we=(e=[],a)=>{switch(a.type){case H:return e=[...e,...a.payload];case se:return e=[...e,a.payload];case $:return e=e.filter(n=>n.idtried!==a.payload);case V:const r=e.find(n=>n.idtried===a.id);if(r!==void 0){const n=e.indexOf(r),s=e.slice(0,n),u=e.slice(n+1,e.length);return e=[...s,{idtried:r.idtried,name:a.payload,description:r.description,user_id:r.user_id},...u]}case B:const i=e.find(n=>n.idtried===a.id);if(i!==void 0){const n=e.indexOf(i),s=e.slice(0,n),u=e.slice(n+1,e.length);return e=[...s,{idtried:i.idtried,name:i.name,description:a.payload,user_id:i.user_id},...u]}case re:return e=[];default:return e}},Ie=(e="",a)=>{switch(a.type){case U:return e=a.payload;case W:return e="";default:return e}},be=Z({auth:Ee,username:Ie,user_id:Ae,totalData:_e,triedData:we}),Re={},Se=be,Oe=ee(Se,Re,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());te.render(t(h.exports.StrictMode,{children:t(ne,{store:Oe,children:t(Te,{})})}),document.getElementById("root"));
