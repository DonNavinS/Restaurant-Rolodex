import{a as W,r as m,u as N,b as T,j as c,c as t,L as y,R as w,B as q,S as K,d as v,e as J,f as Q,g as Y,P as Z}from"./vendor.44b559f4.js";const ee=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}};ee();const te="https://restaurant-rolodex.herokuapp.com",D=W.create({baseURL:`${te}/api`}),x="LOGGED_IN",I="LOGGED_OUT",R="UPDATE_USERNAME",O="UPDATE_USER_ID",S="TOTAL_DATA",L="ADD_TOTAL_DATA",U="REMOVE_TOTAL_DATA",P="UPDATE_TOTAL_NAME",C="UPDATE_TOTAL_DESCRIPTION",k="TRIED_DATA",M="ADD_TRIED_DATA",G="REMOVE_TRIED_DATA",H="UPDATE_TRIED_NAME",j="UPDATE_TRIED_DESCRIPTION",$="WIPE_ALL_DATA",ne=e=>({type:S,payload:e}),ae=e=>({type:L,payload:e}),oe=e=>({type:U,payload:e}),re=(e,n)=>({type:P,id:e,payload:n}),se=(e,n)=>({type:C,id:e,payload:n}),ie=e=>({type:k,payload:e}),de=e=>({type:M,payload:e}),ce=e=>({type:G,payload:e}),le=(e,n)=>({type:H,id:e,payload:n}),ue=(e,n)=>({type:j,id:e,payload:n}),pe=()=>({type:$});function V(){const[e,n]=m.exports.useState(""),[s,d]=m.exports.useState(""),a=N(o=>o.username),i=N(o=>o.user_id),l=N(o=>o.totalData),u=T(),f=async()=>{const o=await D.get(`/total/${i}`);l.length===0&&o.data.length<200&&(u(ne(o.data)),u(pe()))},p=async()=>{const o=await D.post("/total/add",{name:e,description:s,username:a,user_id:i});u(ae(o.data)),n(""),d("")},h=async o=>{const g=await D.delete(`/total/remove/${o.idtotal}`);u(oe(parseInt(g.data.id)))},E=o=>{n(o.target.value)},_=o=>{d(o.target.value)},A=async o=>{let g=prompt("Enter new Restaurant Name");g===null?alert("No changes made"):(D.put(`/total/update/name/${o.idtotal}`,{newName:g}),u(re(o.idtotal,g)))},b=o=>{let g=prompt("Enter new Description");g?(D.put(`/total/update/description/${o.idtotal}`,{newDesc:g}),u(se(o.idtotal,g))):alert("No changes made")},r=o=>{h(o),D.post("/tried/add",{name:o.name,description:o.description,username:a}),console.log(o)};return m.exports.useEffect(()=>{f()},[i]),c("div",{children:[c("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:f,children:"GET"}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:p,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:e,onChange:E}),t("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:s,name:"totalDesc",onChange:_})]}),l.map((o,g)=>c("div",{className:"grid gap-x-10 justify-items-center grid-cols-3 mx-60  ",children:[c("div",{className:"px-6 my-2 ",children:[t("span",{className:"ml-6 mr-1",children:o.name}),t("button",{className:"opacity-20 hover:opacity-80",onClick:()=>A(o),children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),c("div",{className:"mx-6 my-2",children:[t("span",{className:"m-2 px-2",children:o.description}),t("button",{className:"opacity-20 hover:opacity-100 transition duration-150",onClick:()=>b(o),children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),c("div",{className:"px-6 my-2",children:[t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(o),children:"Remove"}),t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>r(o),children:"Move To Tried"})]})]},g))]})}function B(){const[e,n]=m.exports.useState(""),[s,d]=m.exports.useState(""),a=T(),i=N(r=>r.triedData),l=N(r=>r.username),u=N(r=>r.user_id),f=async()=>{if(u!==null){const r=await D.get(`/tried/${u}`);i.length===0&&r.data.length<100&&a(ie(r.data))}},p=async()=>{const r=await D.post("/tried/add",{name:e,description:s,username:l,user_id:u});a(de(r.data)),d(""),n("")},h=async r=>{const o=await D.delete(`/tried/remove/${r.idtried}`),g=parseInt(o.data.idtried);a(ce(g))},E=r=>{let o=prompt("Enter new Restaurant Name");o===null?alert("No changes made"):(D.put(`/tried/update/name/${r.idtried}`,{newName:o}),a(le(r.idtried,o)))},_=r=>{let o=prompt("Enter new Description");o?(D.put(`/tried/update/description/${r.idtried}`,{newDesc:o}),a(ue(r.idtried,o))):alert("No changes made")},A=r=>{n(r.target.value)},b=r=>{d(r.target.value)};return m.exports.useEffect(()=>{f()},[l]),c("div",{children:[c("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:f,children:"GET"}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:p,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",value:e,placeholder:"Restaurant Name",type:"text",onChange:A}),t("input",{className:" p-1 rounded",value:s,placeholder:"Restaurant Description",type:"text",onChange:b})]}),i&&i.map((r,o)=>c("div",{className:"grid grid-cols-3 justify-items-center mx-60",children:[c("div",{className:"px-6 my-2",children:[t("span",{className:"pl-11 m-2 ",children:r.name}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>E(r),children:"Edit Name"})]}),c("div",{className:"my-2",children:[t("span",{className:"px-2 m-2 ",children:r.description}),t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>_(r),children:"Edit Description"})]}),t("div",{className:"my-2",children:t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>h(r),children:"Remove"})})]},o))]})}function me(){const[e,n]=m.exports.useState(!1),s=()=>{localStorage.getItem("token ")?n(!0):n(!1)};return m.exports.useEffect(()=>{s()},[]),t("div",{children:e?c("div",{children:[t(V,{}),t(B,{})]}):t("div",{children:"Log in to see restaurants!"})})}const X=()=>({type:x}),he=()=>({type:I});function ge(){const e=T(),n=N(a=>a.auth),s=N(a=>a.username);return c("nav",{className:"flex justify-around bg-blue-400",children:[c("div",{className:"my-4",children:[t(y,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/home",children:"HOME"}),t(y,{className:" p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out ",to:"/total",children:"TOTAL"}),t(y,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/tried",children:"TRIED"})]}),n?c("div",{className:"m-2 inline-flex",children:[c("p",{className:"p-2",children:["welcome ",s]}),t("button",{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",onClick:()=>{localStorage.removeItem("token "),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),e(he())},children:"LOGOUT"})]}):c("div",{className:"flex",children:[t(w,{to:"/login"}),t(y,{className:"p-2",to:"/signup",children:"SIGNUP"}),t(y,{className:"p-2",to:"/login",children:"LOGIN"})]})]})}function De(){const[e,n]=m.exports.useState(""),[s,d]=m.exports.useState("");return c("div",{children:[t("input",{type:"text",placeholder:"Enter Username",onChange:u=>{n(u.target.value)}}),t("input",{type:"text",placeholder:"Enter Password",onChange:u=>{d(u.target.value)}}),t("button",{onClick:()=>{D.post("/signup",{username:e,password:s}),window.location.reload()},children:"CREATE USER"})]})}const z=e=>({type:R,payload:e}),F=e=>({type:O,payload:e});function Ne(){const[e,n]=m.exports.useState(""),[s,d]=m.exports.useState(""),a=T(),i=N(p=>p.auth);return t("div",{children:i?t(w,{to:"/total"}):c("div",{children:[t("input",{type:"text",placeholder:"Username",onChange:p=>{n(p.target.value)}}),t("input",{type:"text",placeholder:"Password",onChange:p=>{d(p.target.value)}}),t("button",{onClick:()=>{D.post("/login",{username:e,password:s}).then(p=>{if(p.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const h=p.data.user.ID;console.log(p),a(X()),a(z(e)),a(F(h)),localStorage.setItem("user_id",h),localStorage.setItem("username",e),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",p.data.token)}})},children:"LOGIN"})]})})}function fe(){const e=T(),n=localStorage.getItem("username"),s=localStorage.getItem("user_id"),d=()=>{n&&s?(e(z(n)),e(X()),e(F(s))):console.log("NOTHING TO UPDATE")};return m.exports.useEffect(()=>{d()}),t(q,{children:c("div",{className:"bg-red-500 h-screen w-full",children:[t("div",{children:t(ge,{})}),t("div",{className:"App",children:c(K,{children:[t(v,{exact:!0,path:"/",children:t(me,{})}),t(v,{exact:!0,path:"/total",children:t(V,{})}),t(v,{exact:!0,path:"/tried",children:t(B,{})}),t(v,{exact:!0,path:"/signup",children:t(De,{})}),t(v,{exact:!0,path:"/login",children:t(Ne,{})})]})})]})})}const Te=(e=!1,n)=>{switch(n.type){case x:return e=!0;case I:return e=!1;default:return e}},ye=(e=null,n)=>{switch(n.type){case O:return e=n.payload;default:return e}},ve=(e=[],n)=>{switch(n.type){case S:return e=[...e,...n.payload];case L:return e=[...e,n.payload];case U:return e=e.filter(a=>a.idtotal!==n.payload);case P:const s=e.find(a=>a.idtotal===n.id);if(s!==void 0){const a=e.indexOf(s),i=e.slice(0,a),l=e.slice(a+1,e.length);return e=[...i,{idtotal:s.idtotal,name:n.payload,description:s.description,user_id:s.user_id},...l]}case C:const d=e.find(a=>a.idtotal===n.id);if(d!==void 0){const a=e.indexOf(d),i=e.slice(0,a),l=e.slice(a+1,e.length);return e=[...i,{idtotal:d.idtotal,name:d.name,description:n.payload,user_id:d.user_id},...l]}default:return e}},Ee=(e=[],n)=>{switch(n.type){case k:return e=[...e,...n.payload];case M:return e=[...e,n.payload];case G:return e=e.filter(h=>h.idtried!==n.payload);case H:const s=e.find(h=>h.idtried===n.id),d=e.indexOf(s),a=e.slice(0,d),i=e.slice(d+1,e.length);return e=[...a,{idtried:s.idtried,name:n.payload,description:s.description,user_id:s.user_id},...i];case j:const l=e.find(h=>h.idtried===n.id),u=e.indexOf(l),f=e.slice(0,u),p=e.slice(u+1,e.length);return e=[...f,{idtried:l.idtried,name:l.name,description:n.payload,user_id:l.user_id},...p];case $:return e=[];default:return e}},_e=(e="",n)=>{switch(n.type){case R:return e=n.payload;default:return e}},Ae=J({auth:Te,username:_e,user_id:ye,totalData:ve,triedData:Ee}),be={},we=Ae,xe=Q(we,be,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Y.render(t(m.exports.StrictMode,{children:t(Z,{store:xe,children:t(fe,{})})}),document.getElementById("root"));
