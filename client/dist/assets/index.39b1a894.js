import{a as q,r as p,u as g,b as N,j as e,c,L as y,R as w,B as F,S as H,d as b,e as K,f as J,g as Q,P as Y}from"./vendor.3a874bae.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}};Z();const ee="https://restaurant-rolodex.herokuapp.com",x=q.create({baseURL:`${ee}/api`}),I="LOGGED_IN",R="LOGGED_OUT",S="UPDATE_USERNAME",L="UPDATE_USER_ID",C="TOTAL_DATA",U="ADD_TOTAL_DATA",O="REMOVE_TOTAL_DATA",P="UPDATE_TOTAL",j="TRIED_DATA",M="ADD_TRIED_DATA",$="REMOVE_TRIED_DATA",z="UPDATE_TRIED",te="WIPE_ALL_DATA",G="REMOVE_USERNAME",D=t=>({type:C,payload:t}),ne=t=>({type:U,payload:t}),ae=t=>({type:O,payload:t}),se=(t,n,r)=>({type:P,id:t,payload:{name:n,description:r}}),A=t=>({type:j,payload:t}),V=t=>({type:M,payload:t}),re=t=>({type:$,payload:t}),oe=(t,n,r)=>({type:z,id:t,payload:{name:n,description:r}}),W=({table:t})=>{const[n,r]=p.exports.useState(""),[i,a]=p.exports.useState(""),l=g(d=>d.username),h=g(d=>d.user_id),f=N();return e("div",{children:c("div",{className:"flex justify-center p-2",children:[e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white py-1 px-2 transition duration-200 ease-in-out mx-2",onClick:async()=>{const d=await x.post(`/${t}/add`,{name:n,description:i,username:l,user_id:h});console.log(d),f(t==="total"?ne(d.data):V(d.data)),r(""),a("")},children:"POST"}),e("input",{className:"mx-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:n,onChange:d=>r(d.target.value)}),e("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:i,name:"totalDesc",onChange:d=>a(d.target.value)})]})})},B=({setOpenModal:t,id:n,pageType:r})=>{const[i,a]=p.exports.useState(""),[l,h]=p.exports.useState(""),f=N(),u=(d,v,o)=>{x.put(`/${r}/update/${d}`,{name:i,description:l}).then(s=>console.log(s)),r==="tried"?f(oe(d,v,o)):r==="total"&&f(se(d,v,o))};return e("div",{className:"absolute inset-0 z-50 fade-in",style:{background:"rgba(0,0,0,0.7)"},children:c("div",{className:"fade-in absolute inset-1/4 z-40 bg-zinc-200 rounded-lg shadow-lg flex flex-col justify-around items-center gap-y-4",children:[e("h1",{className:"font-semibold text-2xl",children:"Update Restaurant"}),c("div",{className:"flex gap-x-4 ",children:[e("input",{type:"text",placeholder:"New Name",onChange:d=>a(d.target.value),className:"rounded p-1"}),e("input",{type:"text",placeholder:"New Description",onChange:d=>h(d.target.value),className:"rounded p-1"})]}),c("div",{className:"flex gap-x-4",children:[e("button",{className:"border-2 border-zinc-700 text-zinc-700 p-1 rounded-lg hover:text-white hover:bg-zinc-700  transition duration-200",onClick:()=>{u(n,i,l),t==null||t(!1)},children:"Update"}),e("button",{className:"border-2 border-zinc-700 text-zinc-700 p-1 rounded-lg hover:text-white hover:bg-zinc-700  transition duration-200",onClick:()=>t==null?void 0:t(!1),children:"Close"})]})]})})};function le(){const t=g(s=>s.user_id),n=g(s=>s.username),r=g(s=>s.totalData),i=g(s=>s.auth),[a,l]=p.exports.useState(!1),[h,f]=p.exports.useState(0),u=N(),d=async()=>{const s=await x.get(`/total/${t}`);r.length===0&&(u(D(s.data)),console.log(s))},v=async s=>{const m=await x.delete(`/total/remove/${s.id}`);u(ae(parseInt(m.data.id)))},o=async s=>{v(s);const m=await x.post("/tried/add",{name:s.name,description:s.description,username:n,user_id:t});u(V(m.data))};return p.exports.useEffect(()=>{d()},[t]),c("div",{style:{height:"100vh"},className:"fade-in ",children:[a&&e(B,{setOpenModal:l,id:h,pageType:"total"}),i&&r?c("div",{className:"total-page",children:[e(W,{table:"total"}),e("div",{children:r.map((s,m)=>e("div",{className:"flex justify-around",children:e("div",{style:{width:"80%"},className:"p-2 hover:bg-blue-500 rounded hover:bg-opacity-80 transition duration-200",children:c("div",{className:"flex justify-between ",children:[e("div",{className:"flex justify-center w-3/12 items-center",children:e("span",{className:"text-center",children:s.name})}),e("div",{className:"flex items-center justify-center w-4/12",children:e("span",{className:"text-center",children:s.description})}),c("div",{className:"flex gap-x-2",children:[e("button",{onClick:()=>{l(!0),f(s.id),console.log(s)},className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",children:"Edit"}),e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",onClick:()=>v(s),children:"Remove"}),e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",onClick:()=>o(s),children:"Move to Tried"})]})]})})},m))})]}):e("div",{className:"flex justify-center text-4xl font-semibold items-center translate-y-32",children:"Login to see your restaurants!"})]})}function ie(){const[t,n]=p.exports.useState(!1),[r,i]=p.exports.useState(0),a=N(),l=g(o=>o.triedData),h=g(o=>o.username),f=g(o=>o.user_id),u=g(o=>o.auth),d=async()=>{if(f!==null){const o=await x.get(`/tried/${f}`);l.length===0&&a(A(o.data))}},v=async o=>{const s=await x.delete(`/tried/remove/${o.id}`),m=parseInt(s.data.id);a(re(m))};return p.exports.useEffect(()=>{d()},[h]),c("div",{style:{height:"100vh"},className:"fade-in ",children:[t&&e(B,{setOpenModal:n,id:r,pageType:"tried"}),u&&l?c("div",{className:"total-page",children:[e(W,{table:"tried"}),e("div",{children:l.map((o,s)=>e("div",{className:"flex justify-around",children:e("div",{style:{width:"80%"},className:"p-2 hover:bg-blue-500 rounded hover:bg-opacity-80 transition duration-200",children:c("div",{className:"flex justify-between ",children:[e("div",{className:"flex justify-center w-3/12 items-center",children:e("span",{className:"text-center",children:o.name})}),e("div",{className:"flex items-center justify-center w-4/12",children:e("span",{className:"text-center",children:o.description})}),c("div",{className:"flex gap-x-2",children:[e("button",{onClick:()=>{n(!0),i(o.id)},className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",children:"Edit"}),e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",onClick:()=>v(o),children:"Remove"})]})]})})},s))})]}):e("div",{className:"flex justify-center text-4xl font-semibold items-center translate-y-32",children:"Login to see your restaurants!"})]})}function ce(){const t=N(),n=g(u=>u.auth),r=g(u=>u.user_id),i=g(u=>u.totalData),a=g(u=>u.triedData),l=a.slice(-5).reverse(),h=i.slice(-5).reverse(),f=()=>{n&&i.length===0&&a.length===0&&(x.get(`/total/${r}`).then(u=>{t(D(u.data))}),x.get(`/tried/${r}`).then(u=>{t(A(u.data))}))};return p.exports.useEffect(()=>f(),[]),e("div",{className:"fade-in background",children:n?e("div",{style:{height:"100vh",background:"rgba(0,0,0,0.6)"},className:"flex flex-col-reverse text-white",children:c("div",{className:"h-5/6 flex flex-col justify-evenly items-center ",children:[e("h1",{className:"text-center text-6xl font-semibold ",children:"Restaurant Rolodex"}),e("h3",{className:"text-center text-xl",style:{width:"60vw"},children:"To view the complete lists of your total and tried restaurants, and to add, update, or delete restaurants, click the links at the top of the page!"}),c("div",{className:"flex gap-x-10",children:[c("div",{className:"flex flex-col items-center justify-start gap-x-20",children:[e(y,{to:"/total",className:"font-semibold text-3xl link-underline:hover link-underline",children:"TOTAL"}),e("div",{className:"flex flex-col items-center text-2xl",children:h.map((u,d)=>c("div",{children:["Name: ",u.name]},d))})]}),c("div",{className:"flex flex-col items-center justify-start",children:[e(y,{to:"/tried",className:"font-semibold text-3xl link-underline:hover link-underline",children:"TRIED"}),e("div",{className:"flex flex-col items-center text-2xl",children:l.map((u,d)=>c("div",{children:["Name: ",u.name]},d))})]})]})]})}):e(w,{to:"/login"})})}const T=()=>({type:I}),de=()=>({type:R}),E=t=>({type:S,payload:t}),ue=()=>({type:G}),he=({setHeaderBG:t,headerBG:n})=>{const r=N(),i=g(h=>h.auth),a=g(h=>h.username),l=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),localStorage.removeItem("user_id"),r(de()),r(ue())};return c("nav",{style:{height:"10%"},className:`z-20 flex justify-around items-center fixed ${n}  text-white w-full text-2xl font-semibold`,children:[c("div",{className:"inline-flex gap-x-3 items-center",children:[e(y,{className:"bg-transparent link-underline:hover link-underline rounded",to:"/home",onClick:()=>t(""),children:"HOME"}),e(y,{className:"bg-transparent link-underline:hover link-underline rounded",to:"/total",onClick:()=>t("bg-blue-300"),children:"TOTAL"}),e(y,{className:"bg-transparent link-underline:hover link-underline rounded",to:"/tried",onClick:()=>t("bg-blue-300"),children:"TRIED"})]}),i?c("div",{className:"m-2 inline-flex items-center",children:[c("p",{className:"p-2",children:["Welcome ",a,"!"]}),e("button",{className:"bg-transparent link-underline:hover link-underline rounded ",onClick:l,children:"LOGOUT"})]}):c("div",{className:"inline-flex items-center gap-6",children:[e(w,{to:"/login"}),e(y,{to:"/signup",className:"bg-transparent link-underline:hover link-underline rounded ",onClick:()=>t(""),children:"SIGNUP"}),e(y,{to:"/login",className:"bg-transparent link-underline:hover link-underline rounded",onClick:()=>t(""),children:"LOGIN"})]})]})},_=t=>({type:L,payload:t}),k=c("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),X=e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})});function pe(){const[t,n]=p.exports.useState(""),[r,i]=p.exports.useState(""),[a,l]=p.exports.useState(""),[h,f]=p.exports.useState(!1),[u,d]=p.exports.useState(!1),v=g(m=>m.auth),o=N();return e("div",{className:"logged-out-background fade-in",children:e("div",{className:"h-screen w-screen flex",style:{background:"rgba(0,0,0,0.6)"},children:v?e(w,{to:"/total"}):c("div",{style:{background:"rgba(255,255,255,0.5)"},className:"border-2 border-black border-opacity-50 rounded-lg h-3/4 w-1/3 m-auto flex flex-col justify-evenly items-center",children:[e("h1",{className:"font-semibold text-4xl",children:"Signup"}),c("div",{className:"flex justify-center gap-x-2",children:[e("input",{className:"rounded p-1",type:"text",placeholder:"Enter Username",onChange:m=>{n(m.target.value)}}),e("span",{className:"opacity-0",children:k})]}),c("div",{className:"flex justify-center gap-x-2",children:[e("input",{className:"rounded p-1",type:h?"text":"password",placeholder:"Enter Password",onChange:m=>{i(m.target.value)}}),e("button",{className:"text-white",onClick:()=>f(!h),children:h?k:X})]}),c("div",{className:"flex justify-center gap-x-2 ",children:[e("input",{className:"rounded p-1",type:u?"text":"password",placeholder:"Confirm Password",onChange:m=>{l(m.target.value)}}),e("button",{className:"text-white",onClick:()=>d(!u),children:u?k:X})]}),e("div",{className:"flex justify-center",children:e("button",{className:"m-2 bg-red-300 rounded hover:bg-red-500 hover:text-white  p-2 transition duration-300 ease-in-out",onClick:()=>{r!==a?alert("Passwords do not match!"):x.post("/signup",{username:t,password:r}).then(m=>{console.log(m.data.insertId),o(T()),o(E(t)),o(_(m.data.insertId))})},children:"CREATE USER"})})]})})})}function me(){const[t,n]=p.exports.useState(""),[r,i]=p.exports.useState(""),a=N(),l=g(o=>o.auth),h=async o=>{const s=await x.get(`/total/${o}`);a(D(s.data)),console.log(s)},f=async o=>{const s=await x.get(`tried/${o}`);a(A(s.data))};return e("div",{className:"logged-out-background fade-in",children:e("div",{style:{background:"rgba(0,0,0,0.6"},className:"h-screen w-screen flex-col-reverse flex",children:e("section",{style:{background:"rgba(211,211,211,0.7)"},className:"h-3/4 m-auto border-2 border-black border-opacity-50 rounded-lg shadow-md w-4/12",children:l?e(w,{to:"/home"}):c("div",{className:"flex flex-col items-center justify-center h-full gap-6 ",children:[e("h1",{className:"font-semibold text-4xl text-black",children:"Login"}),e("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Username",onChange:o=>{n(o.target.value)}}),e("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Password",onChange:o=>{i(o.target.value)}}),e("button",{className:"m-2 bg-red-300 rounded hover:bg-red-500 hover:text-white  p-2 transition duration-300 ease-in-out",onClick:()=>{x.post("/login",{username:t,password:r}).then(o=>{if(o.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const s=o.data.user.ID;a(T()),a(E(t)),a(_(s)),localStorage.setItem("user_id",s),localStorage.setItem("username",t),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",o.data.token),h(s),f(s)}})},children:"LOGIN"})]})})})})}function ge(){const[t,n]=p.exports.useState(""),r=N(),i=localStorage.getItem("username"),a=localStorage.getItem("user_id"),l=()=>{i?(r(E(i)),r(_(a)),r(T())):console.log("NOTHING TO UPDATE")};return p.exports.useEffect(()=>{l()}),e(F,{children:c("div",{className:"bg-zinc-200 min-h-screen w-full fade-in",children:[e(he,{setHeaderBG:n,headerBG:t}),e("div",{className:"App",children:c(H,{children:[e(b,{exact:!0,path:"/home",component:ce}),e(b,{exact:!0,path:"/total",component:le}),e(b,{exact:!0,path:"/tried",component:ie}),e(b,{exact:!0,path:"/signup",component:pe}),e(b,{exact:!0,path:"/login",component:me})]})})]})})}const fe=(t=!1,n)=>{switch(n.type){case I:return t=!0;case R:return t=!1;default:return t}},xe=(t=null,n)=>{switch(n.type){case L:return t=n.payload;default:return t}},ve=(t=[],n)=>{switch(n.type){case C:return t=[...n.payload];case U:return t=[...t,n.payload];case O:return t=t.filter(a=>a.id!==n.payload);case P:const r=[...t],i=r.find(a=>a.id===n.id);return console.log(i),i.name=n.payload.name,i.description=n.payload.description,[...r];default:return t}},Ne=(t=[],n)=>{switch(n.type){case j:return t=[...n.payload];case M:return t=[...t,n.payload];case $:return t=t.filter(a=>a.id!==n.payload);case z:const r=[...t],i=r.find(a=>a.id===n.id);return i.description=n.payload.description,i.name=n.payload.name,[...r];case te:return t=[];default:return t}},ye=(t="",n)=>{switch(n.type){case S:return t=n.payload;case G:return t="";default:return t}},be=K({auth:fe,username:ye,user_id:xe,totalData:ve,triedData:Ne}),we={},De=be,Ae=J(De,we,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Q.render(e(p.exports.StrictMode,{children:e(Y,{store:Ae,children:e(ge,{})})}),document.getElementById("root"));
