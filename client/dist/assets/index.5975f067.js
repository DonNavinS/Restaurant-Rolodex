import{a as X,r as h,u as f,b as y,j as e,c as i,L as N,R as w,B as q,S as F,d as D,e as K,f as J,g as Q,P as Y}from"./vendor.3a874bae.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}};Z();const ee="https://restaurant-rolodex.herokuapp.com",x=X.create({baseURL:`${ee}/api`}),I="LOGGED_IN",R="LOGGED_OUT",S="UPDATE_USERNAME",k="UPDATE_USER_ID",L="TOTAL_DATA",C="ADD_TOTAL_DATA",U="REMOVE_TOTAL_DATA",O="UPDATE_TOTAL",P="TRIED_DATA",j="ADD_TRIED_DATA",M="REMOVE_TRIED_DATA",G="UPDATE_TRIED",te="WIPE_ALL_DATA",$="REMOVE_USERNAME",b=t=>({type:L,payload:t}),ne=t=>({type:C,payload:t}),ae=t=>({type:U,payload:t}),se=(t,n,o)=>({type:O,id:t,payload:{name:n,description:o}}),A=t=>({type:P,payload:t}),z=t=>({type:j,payload:t}),re=t=>({type:M,payload:t}),oe=(t,n,o)=>({type:G,id:t,payload:{name:n,description:o}}),V=({table:t})=>{const[n,o]=h.exports.useState(""),[c,a]=h.exports.useState(""),l=f(d=>d.username),m=f(d=>d.user_id),g=y();return e("div",{children:i("div",{className:"flex justify-center p-2",children:[e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white py-1 px-2 transition duration-200 ease-in-out mx-2",onClick:async()=>{const d=await x.post(`/${t}/add`,{name:n,description:c,username:l,user_id:m});console.log(d),g(t==="total"?ne(d.data):z(d.data)),o(""),a("")},children:"POST"}),e("input",{className:"mx-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:n,onChange:d=>o(d.target.value)}),e("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:c,name:"totalDesc",onChange:d=>a(d.target.value)})]})})},B=({setOpenModal:t,id:n,pageType:o})=>{const[c,a]=h.exports.useState(""),[l,m]=h.exports.useState(""),g=y(),u=(d,v,r)=>{x.put(`/${o}/update/${d}`,{name:c,description:l}).then(s=>console.log(s)),o==="tried"?g(oe(d,v,r)):o==="total"&&g(se(d,v,r))};return e("div",{className:"absolute inset-0 z-50 fade-in",style:{background:"rgba(0,0,0,0.7)"},children:i("div",{className:"fade-in absolute inset-1/4 z-40 bg-zinc-200 rounded-lg shadow-lg flex flex-col justify-around items-center gap-y-4",children:[e("h1",{className:"font-semibold text-2xl",children:"Update Restaurant"}),i("div",{className:"flex gap-x-4 ",children:[e("input",{type:"text",placeholder:"New Name",onChange:d=>a(d.target.value),className:"rounded p-1"}),e("input",{type:"text",placeholder:"New Description",onChange:d=>m(d.target.value),className:"rounded p-1"})]}),i("div",{className:"flex gap-x-4",children:[e("button",{className:"border-2 border-zinc-700 text-zinc-700 p-1 rounded-lg hover:text-white hover:bg-zinc-700  transition duration-200",onClick:()=>{u(n,c,l),t==null||t(!1)},children:"Update"}),e("button",{className:"border-2 border-zinc-700 text-zinc-700 p-1 rounded-lg hover:text-white hover:bg-zinc-700  transition duration-200",onClick:()=>t==null?void 0:t(!1),children:"Close"})]})]})})};function ie(){const t=f(s=>s.user_id),n=f(s=>s.username),o=f(s=>s.totalData),c=f(s=>s.auth),[a,l]=h.exports.useState(!1),[m,g]=h.exports.useState(0),u=y(),d=async()=>{const s=await x.get(`/total/${t}`);o.length===0&&(u(b(s.data)),console.log(s))},v=async s=>{const p=await x.delete(`/total/remove/${s.id}`);u(ae(parseInt(p.data.id)))},r=async s=>{v(s);const p=await x.post("/tried/add",{name:s.name,description:s.description,username:n,user_id:t});u(z(p.data))};return h.exports.useEffect(()=>{d()},[t]),i("div",{style:{height:"100vh"},className:"fade-in ",children:[a&&e(B,{setOpenModal:l,id:m,pageType:"total"}),c&&o?i("div",{className:"total-page",children:[e(V,{table:"total"}),e("div",{children:o.map((s,p)=>e("div",{className:"flex justify-around",children:e("div",{style:{width:"80%"},className:"p-2 hover:bg-blue-500 rounded hover:bg-opacity-80 transition duration-200",children:i("div",{className:"flex justify-between ",children:[e("div",{className:"flex justify-center w-3/12 items-center",children:e("span",{className:"text-center",children:s.name})}),e("div",{className:"flex items-center justify-center w-4/12",children:e("span",{className:"text-center",children:s.description})}),i("div",{className:"flex gap-x-2",children:[e("button",{onClick:()=>{l(!0),g(s.id),console.log(s)},className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",children:"Edit"}),e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",onClick:()=>v(s),children:"Remove"}),e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",onClick:()=>r(s),children:"Move to Tried"})]})]})})},p))})]}):i("div",{className:"flex justify-center text-4xl font-semibold items-center translate-y-32",children:[e(N,{to:"/login",className:"pr-2 font-semibold hover:underline",children:"Login"}),"to see your restaurants!"]})]})}function le(){const[t,n]=h.exports.useState(!1),[o,c]=h.exports.useState(0),a=y(),l=f(r=>r.triedData),m=f(r=>r.username),g=f(r=>r.user_id),u=f(r=>r.auth),d=async()=>{if(g!==null){const r=await x.get(`/tried/${g}`);l.length===0&&a(A(r.data))}},v=async r=>{const s=await x.delete(`/tried/remove/${r.id}`),p=parseInt(s.data.id);a(re(p))};return h.exports.useEffect(()=>{d()},[m]),i("div",{style:{height:"100vh"},className:"fade-in ",children:[t&&e(B,{setOpenModal:n,id:o,pageType:"tried"}),u&&l?i("div",{className:"total-page",children:[e(V,{table:"tried"}),e("div",{children:l.map((r,s)=>e("div",{className:"flex justify-around",children:e("div",{style:{width:"80%"},className:"p-2 hover:bg-blue-500 rounded hover:bg-opacity-80 transition duration-200",children:i("div",{className:"flex justify-between ",children:[e("div",{className:"flex justify-center w-3/12 items-center",children:e("span",{className:"text-center",children:r.name})}),e("div",{className:"flex items-center justify-center w-4/12",children:e("span",{className:"text-center",children:r.description})}),i("div",{className:"flex gap-x-2",children:[e("button",{onClick:()=>{n(!0),c(r.id)},className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",children:"Edit"}),e("button",{className:"font-medium bg-red-400 rounded hover:bg-red-500 hover:text-white  p-1 transition duration-200 ease-in-out",onClick:()=>v(r),children:"Remove"})]})]})})},s))})]}):i("div",{className:"flex justify-center text-4xl font-semibold items-center translate-y-32",children:[e(N,{to:"/login",className:"pr-2 font-semibold hover:underline",children:"Login"}),"to see your restaurants!"]})]})}function ce(){const t=y(),n=f(u=>u.auth),o=f(u=>u.user_id),c=f(u=>u.totalData),a=f(u=>u.triedData),l=a.slice(-5).reverse(),m=c.slice(-5).reverse(),g=()=>{n&&c.length===0&&a.length===0&&(x.get(`/total/${o}`).then(u=>{t(b(u.data))}),x.get(`/tried/${o}`).then(u=>{t(A(u.data))}))};return h.exports.useEffect(()=>g(),[]),e("div",{className:"fade-in background",children:n?e("div",{style:{height:"100vh",background:"rgba(0,0,0,0.6)"},className:"flex flex-col-reverse text-white",children:i("div",{className:"h-5/6 flex flex-col justify-evenly items-center ",children:[e("h1",{className:"text-center text-6xl font-semibold ",children:"Restaurant Rolodex"}),e("h3",{className:"text-center text-xl",style:{width:"60vw"},children:"To view the complete lists of your total and tried restaurants, and to add, update, or delete restaurants, click the links at the top of the page!"}),i("div",{className:"flex gap-x-10",children:[i("div",{className:"flex flex-col items-center justify-start gap-x-20",children:[e(N,{to:"/total",className:"font-semibold text-3xl link-underline:hover link-underline",children:"TOTAL"}),e("div",{className:"flex flex-col items-center text-2xl",children:m.map((u,d)=>i("div",{children:["Name: ",u.name]},d))})]}),i("div",{className:"flex flex-col items-center justify-start",children:[e(N,{to:"/tried",className:"font-semibold text-3xl link-underline:hover link-underline",children:"TRIED"}),e("div",{className:"flex flex-col items-center text-2xl",children:l.map((u,d)=>i("div",{children:["Name: ",u.name]},d))})]})]})]})}):i("div",{className:"flex justify-center text-4xl font-semibold items-center translate-y-32",children:[e(N,{to:"/login",className:"pr-2 font-semibold hover:underline",children:"Login"}),"to see your restaurants!"]})})}const T=()=>({type:I}),de=()=>({type:R}),E=t=>({type:S,payload:t}),ue=()=>({type:$});function me(){const[t,n]=h.exports.useState(""),o=y(),c=f(m=>m.auth),a=f(m=>m.username),l=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),localStorage.removeItem("user_id"),o(de()),o(ue())};return i("nav",{className:`z-20 flex justify-around items-center fixed ${t} text-white w-full text-2xl font-semibold`,children:[i("div",{className:"inline-flex gap-x-3 items-center",children:[e(N,{className:"bg-transparent link-underline:hover link-underline rounded",to:"/home",onClick:()=>n(""),children:"HOME"}),e(N,{className:"bg-transparent link-underline:hover link-underline rounded",to:"/total",onClick:()=>n("bg-blue-300"),children:"TOTAL"}),e(N,{className:"bg-transparent link-underline:hover link-underline rounded",to:"/tried",onClick:()=>n("bg-blue-300"),children:"TRIED"})]}),c?i("div",{className:"m-2 inline-flex items-center",children:[i("p",{className:"p-2",children:["Welcome ",a,"!"]}),e("button",{className:"bg-transparent link-underline:hover link-underline rounded ",onClick:l,children:"LOGOUT"})]}):i("div",{className:"inline-flex",children:[e(w,{to:"/login"}),e(N,{to:"/signup",className:"p-2 bg-transparent hover:text-white rounded transition duration-300 ease-in-out",children:"SIGNUP"}),e(N,{to:"/login",className:"bg-transparent link-underline:hover link-underline rounded",children:"LOGIN"})]})]})}const _=t=>({type:k,payload:t}),W=i("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),H=e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})});function he(){const[t,n]=h.exports.useState(""),[o,c]=h.exports.useState(""),[a,l]=h.exports.useState(""),[m,g]=h.exports.useState(!1),[u,d]=h.exports.useState(!1),v=f(p=>p.auth),r=y();return e("div",{children:v?e(w,{to:"/total"}):i("div",{className:"flex-col text-center mt-4 ",children:[e("input",{className:"m-2 rounded p-2 mr-9",type:"text",placeholder:"Enter Username",onChange:p=>{n(p.target.value)}}),i("div",{className:"flex justify-center",children:[e("input",{className:"m-2 rounded p-2",type:m?"text":"password",placeholder:"Enter Password",onChange:p=>{c(p.target.value)}}),e("button",{onClick:()=>g(!m),children:m?W:H})]}),i("div",{className:"flex justify-center",children:[e("input",{className:"m-2 rounded p-2",type:u?"text":"password",placeholder:"Confirm Password",onChange:p=>{l(p.target.value)}}),e("button",{onClick:()=>d(!u),children:u?W:H})]}),e("div",{children:e("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{o!==a?alert("Passwords do not match!"):x.post("/signup",{username:t,password:o}).then(p=>{console.log(p.data.insertId),r(T()),r(E(t)),r(_(p.data.insertId))})},children:"CREATE USER"})})]})})}function pe(){const[t,n]=h.exports.useState(""),[o,c]=h.exports.useState(""),a=y(),l=f(r=>r.auth),m=async r=>{const s=await x.get(`/total/${r}`);a(b(s.data)),console.log(s)},g=async r=>{const s=await x.get(`tried/${r}`);a(A(s.data))};return e("div",{className:"flex justify-center items-center h-96",children:e("section",{className:"border-2 border-black border-opacity-50 rounded-lg shadow-md w-4/12 h-5/6",children:l?e(w,{to:"/home"}):i("div",{className:"flex flex-col items-center gap-6",children:[e("h1",{className:"font-semibold text-4xl",children:"Login"}),e("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Username",onChange:r=>{n(r.target.value)}}),e("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Password",onChange:r=>{c(r.target.value)}}),e("button",{className:"m-2 bg-red-300 rounded hover:bg-red-500 hover:text-white  p-2 transition duration-300 ease-in-out",onClick:()=>{x.post("/login",{username:t,password:o}).then(r=>{if(r.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const s=r.data.user.ID;a(T()),a(E(t)),a(_(s)),localStorage.setItem("user_id",s),localStorage.setItem("username",t),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",r.data.token),m(s),g(s)}})},children:"LOGIN"})]})})})}function fe(){const t=y(),n=localStorage.getItem("username"),o=localStorage.getItem("user_id"),c=()=>{n?(t(E(n)),t(_(o)),t(T())):console.log("NOTHING TO UPDATE")};return h.exports.useEffect(()=>{c()}),e(q,{children:i("div",{className:"bg-zinc-200 min-h-screen w-full fade-in",children:[e("div",{children:e(me,{})}),e("div",{className:"App",children:i(F,{children:[e(D,{exact:!0,path:"/home",component:ce}),e(D,{exact:!0,path:"/total",component:ie}),e(D,{exact:!0,path:"/tried",component:le}),e(D,{exact:!0,path:"/signup",component:he}),e(D,{exact:!0,path:"/login",component:pe})]})})]})})}const ge=(t=!1,n)=>{switch(n.type){case I:return t=!0;case R:return t=!1;default:return t}},xe=(t=null,n)=>{switch(n.type){case k:return t=n.payload;default:return t}},ve=(t=[],n)=>{switch(n.type){case L:return t=[...n.payload];case C:return t=[...t,n.payload];case U:return t=t.filter(a=>a.id!==n.payload);case O:const o=[...t],c=o.find(a=>a.id===n.id);return console.log(c),c.name=n.payload.name,c.description=n.payload.description,[...o];default:return t}},Ne=(t=[],n)=>{switch(n.type){case P:return t=[...n.payload];case j:return t=[...t,n.payload];case M:return t=t.filter(a=>a.id!==n.payload);case G:const o=[...t],c=o.find(a=>a.id===n.id);return c.description=n.payload.description,c.name=n.payload.name,[...o];case te:return t=[];default:return t}},ye=(t="",n)=>{switch(n.type){case S:return t=n.payload;case $:return t="";default:return t}},De=K({auth:ge,username:ye,user_id:xe,totalData:ve,triedData:Ne}),we={},be=De,Ae=J(be,we,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Q.render(e(h.exports.StrictMode,{children:e(Y,{store:Ae,children:e(fe,{})})}),document.getElementById("root"));
