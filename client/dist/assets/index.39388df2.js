import{a as J,j as d,b as t,r as h,u as N,c as x,L as E,R as b,B as Q,S as Y,d as A,e as Z,f as ee,g as te,P as ne}from"./vendor.9b51c18e.js";const ae=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};ae();const oe="https://restaurant-rolodex.herokuapp.com",m=J.create({baseURL:`${oe}/api`}),U="LOGGED_IN",P="LOGGED_OUT",C="UPDATE_USERNAME",k="UPDATE_USER_ID",M="TOTAL_DATA",j="ADD_TOTAL_DATA",G="REMOVE_TOTAL_DATA",H="UPDATE_TOTAL_NAME",$="UPDATE_TOTAL_DESCRIPTION",V="TRIED_DATA",B="ADD_TRIED_DATA",W="REMOVE_TRIED_DATA",X="UPDATE_TRIED_NAME",z="UPDATE_TRIED_DESCRIPTION",se="WIPE_ALL_DATA",q="REMOVE_USERNAME",I=e=>({type:M,payload:e}),re=e=>({type:j,payload:e}),ie=e=>({type:G,payload:e}),ce=(e,a)=>({type:H,id:e,payload:a}),de=(e,a)=>({type:$,id:e,payload:a}),F=d("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),K=t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),_=t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})});function le(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),n=N(o=>o.username),s=N(o=>o.user_id),l=N(o=>o.totalData),g=x(),u=async()=>{const o=await m.get(`/total/${s}`);l.length===0&&g(I(o.data))},T=async()=>{const o=await m.post("/total/add",{name:e,description:r,username:n,user_id:s});g(re(o.data)),a(""),i("")},y=async o=>{const v=await m.delete(`/total/remove/${o.idtotal}`);g(ie(parseInt(v.data.id)))},p=o=>{a(o.target.value)},f=o=>{i(o.target.value)},D=async o=>{let v=prompt("Enter new Restaurant Name");v===null?alert("No changes made"):(m.put(`/total/update/name/${o.idtotal}`,{newName:v}),g(ce(o.idtotal,v)))},w=o=>{let v=prompt("Enter new Description");v?(m.put(`/total/update/description/${o.idtotal}`,{newDesc:v}),g(de(o.idtotal,v))):alert("No changes made")},c=o=>{y(o),m.post("/tried/add",{name:o.name,description:o.description,username:n}),console.log(o)};return h.exports.useEffect(()=>{u()},[s]),d("div",{children:[d("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:T,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",placeholder:"Restaurant Name",type:"text",name:"totalName",value:e,onChange:p}),t("input",{className:"p-1 rounded",placeholder:"Restaurant Description",type:"text",value:r,name:"totalDesc",onChange:f})]}),l.map((o,v)=>d("div",{className:"grid gap-x-10 justify-items-center grid-cols-3 mx-60  ",children:[d("div",{className:"px-6 my-2 flex",children:[t("span",{className:"ml-6 mr-1",children:o.name}),t("button",{className:"opacity-20 hover:opacity-80",onClick:()=>D(o),children:t("span",{children:_})})]}),d("div",{className:"mx-6 my-2 flex",children:[t("span",{className:"m-2 px-2",children:o.description}),t("button",{className:"opacity-20 hover:opacity-100 transition duration-150",onClick:()=>w(o),children:t("span",{children:_})})]}),d("div",{className:"px-6 my-2",children:[t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>y(o),children:"Remove"}),t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>c(o),children:"Move To Tried"})]})]},v))]})}const R=e=>({type:V,payload:e}),ue=e=>({type:B,payload:e}),pe=e=>({type:W,payload:e}),me=(e,a)=>({type:X,id:e,payload:a}),he=(e,a)=>({type:z,id:e,payload:a});function ge(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),n=x(),s=N(c=>c.triedData),l=N(c=>c.username),g=N(c=>c.user_id),u=async()=>{if(g!==null){const c=await m.get(`/tried/${g}`);s.length===0&&n(R(c.data))}},T=async()=>{const c=await m.post("/tried/add",{name:e,description:r,username:l,user_id:g});n(ue(c.data)),i(""),a("")},y=async c=>{const o=await m.delete(`/tried/remove/${c.idtried}`),v=parseInt(o.data.idtried);n(pe(v))},p=c=>{let o=prompt("Enter new Restaurant Name");o===null?alert("No changes made"):(m.put(`/tried/update/name/${c.idtried}`,{newName:o}),n(me(c.idtried,o)))},f=c=>{let o=prompt("Enter new Description");o?(m.put(`/tried/update/description/${c.idtried}`,{newDesc:o}),n(he(c.idtried,o))):alert("No changes made")},D=c=>{a(c.target.value)},w=c=>{i(c.target.value)};return h.exports.useEffect(()=>{u()},[l]),d("div",{children:[d("div",{className:"flex justify-center p-2",children:[t("button",{className:"bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out mx-2",onClick:T,children:"POST"}),t("input",{className:"mr-2 p-1 rounded",value:e,placeholder:"Restaurant Name",type:"text",onChange:D}),t("input",{className:" p-1 rounded",value:r,placeholder:"Restaurant Description",type:"text",onChange:w})]}),s&&s.map((c,o)=>d("div",{className:"grid grid-cols-3 justify-items-center mx-60",children:[d("div",{className:"px-6 my-2 flex",children:[t("span",{className:"pl-11 m-2 ",children:c.name}),t("button",{className:"opacity-20 hover:opacity-80 transition duration-500 ease-in-out",onClick:()=>p(c),children:t("span",{children:_})})]}),d("div",{className:"my-2 flex",children:[t("span",{className:"px-2 m-2 ",children:c.description}),t("button",{className:"opacity-20 hover:opacity-80 transition duration-500 ease-in-out",onClick:()=>f(c),children:t("span",{children:_})})]}),t("div",{className:"my-2",children:t("button",{className:" mx-2 bg-blue-300 rounded hover:bg-blue-500  p-1 transition duration-300 ease-in-out",onClick:()=>y(c),children:"Remove"})})]},o))]})}function fe(){const e=x(),a=N(u=>u.auth),r=N(u=>u.user_id),i=N(u=>u.totalData),n=N(u=>u.triedData),s=n.slice(-5).reverse(),l=i.slice(-5).reverse(),g=()=>{a&&i.length===0&&n.length===0&&(m.get(`/total/${r}`).then(u=>{e(I(u.data))}),m.get(`/tried/${r}`).then(u=>{e(R(u.data))}))};return h.exports.useEffect(()=>g(),[]),t("div",{children:a?d("div",{children:[t("div",{className:"flex justify-center text-5xl",children:"Recently Updated Restaurants"}),t("div",{className:"flex justify-center text-xl mt-6",children:"To view the complete lists of your total and tried restaurants, click the links at the top of the page!"}),d("div",{className:"flex justify-center items-center my-8 gap-x-20 text-2xl",children:[d("div",{className:"flex flex-col justify-center items-center",children:[t("div",{children:"TOTAL"}),l.map(u=>d("div",{children:["name: ",u.name]}))]}),d("div",{className:"flex flex-col justify-center items-center",children:[t("div",{children:"TRIED"}),s.map(u=>t("div",{children:u.name}))]})]})]}):t("div",{children:"Log in to see restaurants!"})})}const S=()=>({type:U}),De=()=>({type:P}),O=e=>({type:C,payload:e}),Ne=()=>({type:q});function ve(){const e=x(),a=N(n=>n.auth),r=N(n=>n.username);return d("nav",{className:"flex justify-around items-center bg-blue-400 pb-6 w-full py-4 text-2xl",children:[d("div",{className:"inline-flex items-center",children:[t(E,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/home",children:"HOME"}),t(E,{className:" p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out ",to:"/total",children:"TOTAL"}),t(E,{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",to:"/tried",children:"TRIED"})]}),a?d("div",{className:"m-2 inline-flex items-center",children:[d("p",{className:"p-2",children:["Welcome ",r,"!"]}),t("button",{className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("loggedIn"),localStorage.removeItem("user_id"),e(De()),e(Ne())},children:"LOGOUT"})]}):d("div",{className:"inline-flex",children:[t(b,{to:"/login"}),t(E,{to:"/signup",className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",children:"SIGNUP"}),t(E,{to:"/login",className:"p-2 bg-transparent hover:bg-blue-500 rounded transition duration-300 ease-in-out",children:"LOGIN"})]})]})}const L=e=>({type:k,payload:e});function ye(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),[n,s]=h.exports.useState(""),[l,g]=h.exports.useState(!1),[u,T]=h.exports.useState(!1),y=N(D=>D.auth),p=x();return t("div",{children:y?t(b,{to:"/total"}):d("div",{className:"flex-col text-center mt-4 ",children:[t("input",{className:"m-2 rounded p-2 mr-9",type:"text",placeholder:"Enter Username",onChange:D=>{a(D.target.value)}}),d("div",{className:"flex justify-center",children:[t("input",{className:"m-2 rounded p-2",type:l?"text":"password",placeholder:"Enter Password",onChange:D=>{i(D.target.value)}}),t("button",{onClick:()=>g(!l),children:l?F:K})]}),d("div",{className:"flex justify-center",children:[t("input",{className:"m-2 rounded p-2",type:u?"text":"password",placeholder:"Confirm Password",onChange:D=>{s(D.target.value)}}),t("button",{onClick:()=>T(!u),children:u?F:K})]}),t("div",{children:t("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{r!==n?alert("Passwords do not match!"):m.post("/signup",{username:e,password:r}).then(D=>{console.log(D.data.insertId),p(S()),p(O(e)),p(L(D.data.insertId))})},children:"CREATE USER"})})]})})}function xe(){const[e,a]=h.exports.useState(""),[r,i]=h.exports.useState(""),n=x(),s=N(p=>p.auth),l=async p=>{const f=await m.get(`/total/${p}`);n(I(f.data)),console.log(f)},g=async p=>{const f=await m.get(`tried/${p}`);n(R(f.data))};return t("div",{children:s?t(b,{to:"/home"}):d("div",{className:"flex justify-center mt-4",children:[t("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Username",onChange:p=>{a(p.target.value)}}),t("input",{className:"m-2 rounded p-1",type:"text",placeholder:"Password",onChange:p=>{i(p.target.value)}}),t("button",{className:"m-2 bg-blue-300 rounded hover:bg-blue-500  p-2 transition duration-300 ease-in-out",onClick:()=>{m.post("/login",{username:e,password:r}).then(p=>{if(p.data==="Invalid Credentials")alert("Invalid Login Credentials");else{const f=p.data.user.ID;n(S()),n(O(e)),n(L(f)),localStorage.setItem("user_id",f),localStorage.setItem("username",e),localStorage.setItem("loggedIn","true"),localStorage.setItem("token",p.data.token),l(f),g(f)}})},children:"LOGIN"})]})})}function Te(){const e=x(),a=localStorage.getItem("username"),r=localStorage.getItem("user_id"),i=()=>{a?(e(O(a)),e(L(r)),e(S())):console.log("NOTHING TO UPDATE")};return h.exports.useEffect(()=>{i()}),t(Q,{children:d("div",{className:"bg-rose-500 h-screen w-full",children:[t("div",{children:t(ve,{})}),t("div",{className:"App",children:d(Y,{children:[t(A,{exact:!0,path:"/home",component:fe}),t(A,{exact:!0,path:"/total",component:le}),t(A,{exact:!0,path:"/tried",component:ge}),t(A,{exact:!0,path:"/signup",component:ye}),t(A,{exact:!0,path:"/login",component:xe})]})})]})})}const Ee=(e=!1,a)=>{switch(a.type){case U:return e=!0;case P:return e=!1;default:return e}},Ae=(e=null,a)=>{switch(a.type){case k:return e=a.payload;default:return e}},_e=(e=[],a)=>{switch(a.type){case M:return e=[...e,...a.payload];case j:return e=[...e,a.payload];case G:return e=e.filter(n=>n.idtotal!==a.payload);case H:const r=e.find(n=>n.idtotal===a.id);if(r!==void 0){const n=e.indexOf(r),s=e.slice(0,n),l=e.slice(n+1,e.length);return e=[...s,{idtotal:r.idtotal,name:a.payload,description:r.description,user_id:r.user_id},...l]}case $:const i=e.find(n=>n.idtotal===a.id);if(i!==void 0){const n=e.indexOf(i),s=e.slice(0,n),l=e.slice(n+1,e.length);return e=[...s,{idtotal:i.idtotal,name:i.name,description:a.payload,user_id:i.user_id},...l]}default:return e}},we=(e=[],a)=>{switch(a.type){case V:return e=[...e,...a.payload];case B:return e=[...e,a.payload];case W:return e=e.filter(n=>n.idtried!==a.payload);case X:const r=e.find(n=>n.idtried===a.id);if(r!==void 0){const n=e.indexOf(r),s=e.slice(0,n),l=e.slice(n+1,e.length);return e=[...s,{idtried:r.idtried,name:a.payload,description:r.description,user_id:r.user_id},...l]}case z:const i=e.find(n=>n.idtried===a.id);if(i!==void 0){const n=e.indexOf(i),s=e.slice(0,n),l=e.slice(n+1,e.length);return e=[...s,{idtried:i.idtried,name:i.name,description:a.payload,user_id:i.user_id},...l]}case se:return e=[];default:return e}},be=(e="",a)=>{switch(a.type){case C:return e=a.payload;case q:return e="";default:return e}},Ie=Z({auth:Ee,username:be,user_id:Ae,totalData:_e,triedData:we}),Re={},Se=Ie,Oe=ee(Se,Re,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());te.render(t(h.exports.StrictMode,{children:t(ne,{store:Oe,children:t(Te,{})})}),document.getElementById("root"));
